# 类型

## 2.1 变量

运行时内存分配操作会确保变量自动化初始为`二进制零值(zero value)`, 避免出现不可预测的行为。

```go
var x int  // 自动化初始为0
var y = false   // 自动推断为bool类型

var x,y int // 相同类型多个变量

// 建议以组的方式整理多行变量定义
var{
  x,y int
  a,s = 100,"abc"
}
```

### 简短模式 short variable declaration 

```go
/*
定义变量同时显式初始化
不能提供数据类型
只能在函数内部使用
*/

func main(){
  x := 100
  a,s := 1, "adc"
}
```



简短模式并不总是重新定义变量，也可能是部分退化的**赋值操作**

```go
func main(){
  x := 100
  print(&x)
  
  x, y := 200,"abc"
  println(&x, x)
  println(y)
}
```

退化赋值的条件是：最少有一个新的变量被定义，且必须是同一作用域

在处理函数错误返回值时，退化赋值允许我们重复使用err变量

### 多变量赋值

在进行多变量赋值时，首先计算出所有的右值，然后再依次完成赋值操作

> `go tool objdump -s "main/.main" test`



### 未使用错误

编译器将未使用的局部变量当做错误。

全局变量没问题



## 2.2 命名

### 命名建议

- 字母或者下划线开始
- 区分大小写
- 使用驼峰格式
- 局部变量优先使用短名字
- 专有名词大写

> Go 支持用汉字等Unicode字符命名

```go
func main(){
	var c int
  for i :=0; i<10;i++{
    c++
  }
}
```

符号名字` 首字母大小写决定了其作用域`

首字母大写的为导出成员，可以被包外引用，而小写仅能在包内使用。

### 空表示符

"_" blank identifier。 通常作为忽略占位符使用，可做表达式左值，无法读取内容

```go
import "strconv"
func main(){
  x,_:=strcow.Atoi("12")
  println(x)
}
```

空标识符可以用来临时规避编译器对未使用变量和导入包的错误检查。是预置成员，不能重新定义。

## 2.3 常量

```go
const x,y int = 123, 0x22
const s = "hello"
```

可以在函数代码中定义常量，不曾使用的常量不会引发编译错误

常量值可以使某些编译器能计算出结果的表达式

```go
import "unsafe"
const{
  ptrSize = unsafe.Sizeof(uintptr(0))
  strSize = len("hello, world")
}
```



### 枚举

```go
const (
	x = iota   // 0
  y
  z
)
```

## 展开

```go
var x = 0x100
const y = 0x200
func main(){
  print(&x,x)
  pront(&y, y ) // cannot take the address of y
}

```

不同于变量在`运行期`分配存储内存(非优化状态)， 常量通常会被编译器在预处理阶段直接展开，作为指令数据使用。

```go
const y = 0x200

func main(){
  print(y)
}
```

```sh
go build && go tool objdump -s "main./main" test
```

数字常量不会分配存储空间， 无须像变量那样通过内存寻址来取值，因此无法获取地址。

> 鉴于Go当前对动态库的支持还不完善，是否存在"常量陷阱"的问题还有待观察

## 2.4 基本类型

```go
package main

import (
	"fmt"
	"math"
)

func main() {
	a, b, c := 100, 0144, 0x64
	println(a, b, c)
	fmt.Println(a, b, c)
	fmt.Printf("0b%b, %#o, %#x\n", a, b, c)

	fmt.Println(math.MinInt8, math.MaxInt8)
}
```

##### strconv

```go
package main

import "strconv"

func main() {
	a, _ := strconv.ParseInt("1100100", 2, 32)
	b, _ := strconv.ParseInt("0144", 8, 32)
	c, _ := strconv.ParseInt("64", 16, 32)

	println(a, b, c)

	println("0b" + strconv.FormatInt(a, 2))
	println("0" + strconv.FormatInt(b, 8))
	println("0x" + strconv.FormatInt(c, 16))

}
```

### 别名

在官方语言规范中专门提到两个别名

```sh
byte alias for unit8
rune alias for int32
```

## 2.5 引用类型









